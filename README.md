# 빅콘테스트 2021, ECO 제주 분야 최우수상
### ['그린핀치'팀 최종 발표 영상 클릭](https://youtu.be/bx2k0cbR4bE?t=8776)
#### 📰 [발표자료](https://github.com/jihye0115/2021-Bigcontest2021-JejuFoodWaste/blob/main/%EA%B7%B8%EB%A6%B0%ED%95%80%EC%B9%98%ED%8C%80_%EA%B2%B0%EA%B3%BC%EB%B3%B4%EA%B3%A0%EC%84%9C.pdf)

## ✨ 내가 기여한 주요 포인트

- **다양한 외부 데이터 제안**
상가 정보, 초중고생 등교일, 주가, 물가지수, 코로나 검색어 데이터 등 외부 데이터 중 상당 부분을 제안하였다. 이는 음식물 쓰레기 배출량에 무엇이 영향을 미칠지 끊임없이 고민하고, 이에 대한 연구 논문들과 책을 읽는 등 자료를 조사하였기 때문에 아이디어를 얻고 해당 데이터들을 찾아볼 수 있었다.
- **클러스터 변수**
행정동별 특성을 반영하는 과정에, 우리가 모은 외부데이터를 활용할 수 없을까 고민하다가, 외부 데이터 중 여러 요소를 함께 클러스터링에 반영하여 복합적으로 의미를 붙일 수 있었다.
- **모델 해석**
모델을 해석할 수 있는 방안을 탐색하여, shap value를 공부하여 이를 중요변수 선정과 배출량 예측에 어떻게 영향을 미쳤는지 파악하는 용도로 사용하였다.
<br>

## 💡 우리 팀의 강점
- 배출량에 영향을 미치는 다양한 **외부데이터**
- 사전 **클러스터링**을 통한 행정동별 특성 반영
- 미래 시점의 **유동인구는 예측**하여 사용

⇒ **예측오차를 28만에서 20만으로 약 30% 감소**시킬 수 있었고,
모델 해석 결과 구축한 여러 외부 데이터가 중요 변수로 드러나 감소 방안 도출과 예측력 향상에 기여함을 알 수 있었다.
<br></br>

## 🚩 문제 정의 : 2021년 7, 8월 두 달 간의 41개 행정동별 제주도 음식물 쓰레기 배출량을 예측하고, 감소 방안 제시하기
<br> 

## 사용 데이터
- 제공 데이터 : 제주도 음식물 쓰레기 배출량, 유동인구, 카드 소비량 데이터
- 외부 데이터 : 상가 정보, 가구 정보, 기상 관측, 학교 개수, 주가, 물가지수, 코로나 확진자 수, 검색어 (코로나, 관광 관련), 공휴일 데이터
<br>

## 학습 및 검증 기간
- 학습 : 2018년 1월 ~ 2021년 4월
- 검증 : 2021년 5월 ~ 6월
- 결과 예측 : 2021년 7월 ~ 8월
<br>

## 🔎 모델링 과정

### 💻 전처리
- 이상 구간 : 배출량이 비정상적으로 감소하는 구간을 살펴보니 거점 지역 자체가 적음 —> 거점지역 개수를 변수로 사용하여 이상 구간이 예측력에 영향을 미치지 않도록 처리
- 거점별 배출량은 합산 --> 행정동별 일별 배출량 데이터 --> 일별 예측 후 다시 7월과 8월로 월별 합산  
<br>

### 💻 데이터 구축
1. **다양한 외부 데이터 탐색**
    - 각 행정동의 특성 반영하기 위해, 상가, 학원, 캠핑장, 숙박업소 등의 데이터로 주거지구인지 관광지구인지 학습하도록 하였다.
    - 사람의 행동 패턴, 인원 수 등을 반영하기 위해, 휴일, 초중고 학교 개수, 등교일, 세대 수 등의 데이터를 사용하였다.
    
2. **클러스터 변수**<br>
가진 데이터에서 우리가 가지고 있는 정보를 최대한 반영한 변수를 만들기 위해 추가 가공
    - Kmeans : 여러 변수의 정적 클러스터링
    - Time Series : 시계열 패턴 클러스터링
    유동인구의 경우 합산 통계량 보다는 시계열 흐름이 중요하기 때문에 그 패턴을 반영한 클러스터링을 진행하기 위해 Time Series Clustering을 진행하였다.
    
3. **카드 파생 변수**<br>
카드 소비 중, 가정에서의 음식물 쓰레기 배출에 영향을 미치는 것은 배달, 외식, 마트/슈퍼, 농축수산물 등이 있다. 음식 소비는 배출량에 직결되나, 미래 시점의 예측이 어려워 지금까지의 합산 또는 평균이라는 통계량을 사용하여 **'정적 변수'로 활용**하였다. 또한, 가정에서 소비하는 행태는 1인당 소비량 보다는 가구별 소비량이 더 의미 있으므로, 외부 데이터로 수집한 내용 중 가구 관련 데이터와 함께 가공하여 사용하였다.
<br>

### 💻 7~8월 유동 인구 모델링
- 유동 인구는 실제로 사람이 얼마나 머물렀냐의 정보를 가지고 있어 음식물 쓰레기 배출과 매우 연관이 높았다. 다만, 연령별 성별별로 나누어 예측함으로써, 비슷한 사람들끼리 모아 예측을 조금 더 쉽게 하고, 해석에 있어서도 용이하게 하였다.
- 다양한 모델링 결과 Catboost를 사용하였으며, 모델 해석을 통해 각 유동 인구가 내재적으로 가지고 있는 특성을 해석할 수 있었다.
<br>

### 💻 배출량 모델링
- 앞서 가공한 변수들과 외부 데이터, 7~8월의 유동 인구를 모두 모아 배출량 모델링을 진행하였다.
- 41개라는 많은 행정동을 효율적으로 예측하기 위해, 크게 **클러스터별** 모델링과 **전체 통합** 모델링을 진행하였다.
- 각 데이터에 대해서는 **Catboost 단일 모델**과 **Cat + RF/GBM/ET 앙상블**을 시도하였고, 각 행정동마다 클러스터별 모형과 전체 통합 모형 중 결과가 좋은 것을 선택하였다. 다양한 베이스 모델 중 Catboost의 성능이 월등했기 때문인데, 이는 앞서 생성한 다양한 범주형 변수들을 Catboost가 유의미하게 학습하였기 때문으로 볼 수 있다.
<br>

### 💻 모델 해석
- 해결 방안을 도출하기 위해 **shap value**를 이용해 중요 변수를 파악하고, 각 중요 변수가 배출량에 미치는 영향을 시각화하여 해결 방안 도출에 활용하였다.
- 가장 유의한 변수는 **학원 개수**였다. 학원이 많아질수록 배출량 또한 크게 예측되고, 450대 밤 거주 유동 인구도 중요하며 배출량에 급격한 양의 영향을 미친다. 따라서 **10대 자녀와 450대 부모**로 이루어진 가정에 주목하여 해결 방안을 제안하였다.

<br>

## Collaborator
고정욱 <br>
[김이현](https://github.com/IhyeonKIM ) (@IhyeonKIM) <br>
[박지원](https://github.com/jiwonlydia) (@jiwonlydia) <br>


